!function(e){function a(a,t,i){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"get",url:"add"===i?window.location.origin+"/dashboard/properties/"+a+"/favorites":window.location.origin+"/dashboard/properties/"+a+"/favorites/1",dataType:"json",success:function(e){},error:function(e,a,t){console.log(t)},complete:function(e,a){}})}function t(a){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"get",url:window.location.origin+"/locations",data:{city:a},dataType:"json",success:function(a){a.data;let t=e(".location-datalist"),i="";e.each(a.data,function(e,a){i+='<option value="'+a.name+'">'}),t.html(i)},error:function(e,a,t){},complete:function(e,a){}})}function i(){(function(e){for(var a=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var r=t[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(a))return r.substring(a.length,r.length)}return null})("allowCookies")||e(".toast").show()}e("#btnDeny").click(function(){var a;a="allowCookies",document.cookie=a+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",e(".toast").toast("hide")}),e(document).ready(function(){e("#search-property-ref").submit(function(a){var t;a.preventDefault(),t=e("#ref-id").val(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/searchWithID",data:{id:t},success:function(a){200===a.status?location.assign(a.data):e("#property_id-error").text(a.data)},error:function(e,a,t){},complete:function(e,a){}})}),e(".index-form").submit(function(a){a.preventDefault(),function(){let a=window.location.origin,t="",i="",r="",o="",s="",n="",l="",c="",d="",m="",p="",h="";i=e("[name = property_purpose]").val(),r=e("[name = property_type]").val(),o=e("[name = city]").val(),n=e("[name = min_price]").val(),l=e("[name = max_price]").val(),c=e("[name = min_area]").val(),d=e("[name = max_area]").val(),m=e("[name = property_area_unit]").val(),s=e("[name = bedrooms]").val(),h=e("[name^= property_subtype-"+r+"]").val(),p=e("#location").val(),t=a+"/",t+=null==h?r.toLowerCase():h.replace(/ /g,"-").toLowerCase(),t+="_for_",t+="Buy"===i?"sale":i.toLowerCase(),(c<0||d<0)&&(c="",d=""),(n<0||l<0)&&(n=0,l=0),t+="/"+o.replace(/ /g,"-").toLowerCase()+"?",""!==p&&(t+="location="+p.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==n&&null!==n&&""!==n&&(t+="&min_price="+n),"Any"!==l&&null!==l&&""!==l&&(t+="&max_price="+l),"0"!==c&&null!==c&&""!==c&&(t+="&min_area="+c),"Any"!==d&&null!==d&&""!==d&&(t+="&max_area="+d),"All"!==s&&null!==s&&""!==s&&(t+="&bedrooms="+s),t+="&area_unit="+m.replace(" ","-").toLowerCase(),t+="&sort=newest",window.location.href=t}()}),e(".index-form-2").submit(function(a){a.preventDefault(),function(){let a=window.location.origin,t="",i="",r="",o="",s="",n="",l="",c="",d="",m="",p="";t=e("#search2-property-purpose").val(),i=e("#search2-property-type").val(),r=e("#search2-city").val(),s=e("#search2-select-min-price").val(),n=e("#search2-select-max-price").val(),l=e("#search2-select-min-area").val(),c=e("#search2-select-max-area").val(),d=e("[name = search2-unit]").val(),o=e("#search2-beds").val(),p=e("[id^= search2-subtype-"+i+"]").val(),m=e("#search2-location").val();let h=a+"/";h+=null==p?i.toLowerCase():p.replace(/ /g,"-").toLowerCase(),h+="_for_",h+="Buy"===t?"sale":t.toLowerCase(),(l<0||c<0)&&(l="",c=""),(s<0||n<0)&&(s=0,n=0),h+="/"+r.replace(/ /g,"-").toLowerCase()+"?",""!==m&&(h+="location="+m.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==s&&null!==s&&""!==s&&(h+="&min_price="+s),"Any"!==n&&null!==n&&""!==n&&(h+="&max_price="+n),"0"!==l&&null!==l&&""!==l&&(h+="&min_area="+l),"Any"!==c&&null!==c&&""!==c&&(h+="&max_area="+c),"All"!==o&&null!==o&&""!==o&&(h+="&bedrooms="+o),h+="&area_unit="+d.replace(" ","-").toLowerCase(),h+="&sort=newest",window.location.href=h}()}),e(document).on("click",".favorite",function(t){e(this).hide(),a(e(this).data("id"),e(this),"add"),e(this).next().show()}),e(document).on("click",".remove-favorite",function(t){e(this).hide(),a(e(this).data("id"),e(this),"delete"),e(this).prev().show()}),e(".detail-favorite").on("click",function(t){let i=e(".detail-favorite");i.hide(),a(e(this).data("id"),e(this),"add"),i.next().show()}),e(".detail-remove-favorite").on("click",function(t){let i=e(".detail-remove-favorite");i.hide(),a(e(this).data("id"),e(this),"delete"),i.prev().show()});let r=e(".property-type-select2");r.on("change",function(a){const t=e(this).val();"Plots"===t||"Commercial"===t?e(".beds-block").hide():e(".beds-block").show(),e("[id^=property_subtype-]").hide(),e("[id^=search2-property_subtype-]").hide(),e("#property_subtype-"+t).toggle(),e("#search2-property_subtype-"+t).toggle()}),"Plots"===r.val()&&e(".beds-block").hide();let o="";e(".detail-page-banner").is(":visible")?(o=r.val(),t(e("#city option:selected").val())):(o=e("#search2-property-type").val(),t(e("#search2-city option:selected").val())),e("[id^=search2-property_subtype-]").hide(),e("[id^=-property_subtype-]").hide(),e("#search2-property_subtype-"+o).toggle(),e("#property_subtype-"+o).toggle(),e("#city").on("change",function(a){t(e("#city option:selected").val())}),e("#search2-city").on("change",function(a){t(e("#search2-city option:selected").val())}),e(".reset-search-option").on("click",function(){e("#location").val(""),e("input[name=area_unit]").val("Marla"),e(".index-form").trigger("reset"),e(".index-form-2").trigger("reset"),e(".custom-select").data("index","0").trigger("change"),sessionStorage.clear()}),e(".reset-search-banner2, #reset-search-banner2lg").on("click",function(){e.each(e(".custom-select"),function(a,t){~t.id.indexOf("purpose")&&e(this).val("Buy").trigger("change"),~t.id.indexOf("type")&&e(this).val("Homes").trigger("change"),~t.id.indexOf("city")&&e(this).val("Islamabad").trigger("change"),~t.id.indexOf("beds")&&e(this).val("All").trigger("change"),~t.id.indexOf("min-price")&&e(this).val("0").trigger("change"),~t.id.indexOf("max-price")&&e(this).val("Any").trigger("change"),~t.id.indexOf("min-area")&&e(this).val("0").trigger("change"),~t.id.indexOf("max-area")&&e(this).val("Any").trigger("change"),~t.id.indexOf("area-unit")&&e(this).val("Marla").trigger("change")}),sessionStorage.clear(),e(".index-form").trigger("reset"),e(".index-form-2").trigger("reset"),e("#search2-location").val(""),e("#location").val("")});let s=parseInt(sessionStorage.getItem("min_price")),n=parseInt(sessionStorage.getItem("max_price")),l=parseInt(sessionStorage.getItem("min_area")),c=parseInt(sessionStorage.getItem("max_area"));e(document.body).on("change","[name=max_area]",function(){c=parseInt(e(this).val()),0!==l&&""!==c?c<=l?(e("#min-max-text").html("Max area must be greater than Min area: "+l),e("#minMaxModal").modal("show"),e("#select-max-area").val(""),e("#search2-select-max-area").val(""),sessionStorage.setItem("max_area","")):sessionStorage.setItem("max_area",c):sessionStorage.setItem("max_area","")}),e(document.body).on("change","[name=min_area]",function(){""!==(l=parseInt(e(this).val()))&&0===l&&(e("#min-max-text").html("Min area must be greater than 0"),e("#minMaxModal").modal("show"),e("#select-min-area").val(""),e("#search2-select-min-area").val("")),""!==l&&0!==l&&""!==c&&0!==c?c<=l?(e("#min-max-text").html("Max area must be greater than Min area: "+l),e("#minMaxModal").modal("show"),e("#select-max-area").val(""),e("#search2-select-max-area").val(""),sessionStorage.setItem("min_area","")):sessionStorage.setItem("min_area",l):sessionStorage.setItem("min_area","")}),e(document.body).on("change","[name=bedrooms]",function(){sessionStorage.setItem("bedrooms",e(this).val())}),e(document.body).on("change","[name=min_price]",function(){""!==(s=parseInt(e(this).val()))&&0===s&&(e("#min-max-text").html("Min price must be greater than 0"),e("#minMaxModal").modal("show"),e("#select-min-price").val(""),e("#search2-select-min-price").val("")),""!==s&&0!==s&&""!==n&&0!==n?n<=s?(e("#min-max-text").html("Max price must be greater than Min price:"+s),e("#minMaxModal").modal("show"),e("#select-max-price").val(""),e("#search2-select-max-price").val(""),sessionStorage.setItem("min_price","")):sessionStorage.setItem("min_price",s):sessionStorage.setItem("min_price","")}),e(document.body).on("change","[name=max_price]",function(){n=parseInt(e(this).val()),""!==s&&0!==s&&""!==n?n<=s?(e("#min-max-text").html("Max price must be greater than Min price:"+s),e("#minMaxModal").modal("show"),e("#select-max-price").val(""),e("#search2-select-max-price").val(""),sessionStorage.setItem("max_price","")):sessionStorage.setItem("max_price",n):sessionStorage.setItem("max_price","")}),null!==sessionStorage.getItem("max_area")&&""!==sessionStorage.getItem("max_area")&&(e("#select-max-area").val(parseInt(sessionStorage.getItem("max_area"))),e("#search2-select-max-area").val(parseInt(sessionStorage.getItem("max_area")))),null!==sessionStorage.getItem("min_area")&&""!==sessionStorage.getItem("min_area")&&(e("#select-min-area").val(parseInt(sessionStorage.getItem("min_area"))),e("#search2-select-min-area").val(parseInt(sessionStorage.getItem("min_area")))),null!==sessionStorage.getItem("min_price")&&""!==sessionStorage.getItem("min_price")&&(e("#select-min-price").val(parseInt(sessionStorage.getItem("min_price"))),e("#search2-select-min-price").val(parseInt(sessionStorage.getItem("min_price")))),null!==sessionStorage.getItem("max_price")&&""!==sessionStorage.getItem("max_price")&&(e("#select-max-price").val(parseInt(sessionStorage.getItem("max_price"))),e("#search2-select-max-price").val(parseInt(sessionStorage.getItem("max_price")))),null!==sessionStorage.getItem("bedrooms")&&(e("#search2-beds").val(parseInt(sessionStorage.getItem("bedrooms"))),e("#beds").val(parseInt(sessionStorage.getItem("bedrooms"))));let d=e("#sign-in-card");d.validate({rules:{email:{required:!0},password:{required:!0}},messages:{},errorElement:"small",errorClass:"help-block text-red",submitHandler:function(e){event.preventDefault()},invalidHandler:function(a,t){const i=t.numberOfInvalids();if(i){let a=e("div.error.text-red");a.hide();const t=1===i?"You missed 1 field. It has been highlighted":"You missed "+i+" fields. They have been highlighted";e("div.error.text-red span").html(t),a.show()}else e("div.error.text-red").hide()}}),e("#sign-in-btn").click(function(t){d.valid()&&(t.preventDefault(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),t.preventDefault(),jQuery.ajax({type:"post",url:window.location.origin+"/login",data:d.serialize(),dataType:"json",success:function(t){if(t.data){e(".error-tag").hide(),e("#exampleModalCenter").modal("hide");let o=e(".user-dropdown"),s=e(".nav-property-link"),n=e(".nav-profile-link");o.html(""),s.html(""),n.html("");let l=t.user.name,c=t.user.id,d='            <div class="dropdown dropdown-min-width">                <a class="nav-link dropdown-toggle text-center" data-toggle="dropdown" role="button" href="javascript:void(0);" id="dropdownMenuButton" aria-haspopup="true"                    aria-expanded="false">                      <i class="fas fa-user mr-2"></i>';d+='<span class="mr-1">'+l+" (ID: "+c+")<span>",d+='</a>                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">',d+='<a class="dropdown-item" href=" '+window.location.origin+"/dashboard/accounts/users/"+c+'/edit"><i class="far fa-user-cog mr-2"></i>Manage Profile</a>                     <div class="dropdown-divider"></div><a class="dropdown-item" href=" '+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+c+'/sort/id/order/asc/page/10"><i class="fa fa-building-o mr-2"></i>Property Management </a>                     <div class="dropdown-divider"></div>                          <a class="dropdown-item" href="'+window.location.origin+'/dashboard/accounts/logout"><i class="far fa-sign-out mr-2"></i>Logout</a>',d+="</div></div>";let m='<a class="nav-link theme-dark-blue" href="'+window.location.origin+"/dashboard/accounts/users/"+c+'/edit" >My Account Settings</a>',p='<a class="nav-link theme-dark-blue" href=" '+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+c+'/sort/id/order/asc/page/10"> Property Management </a>';if(o.html(d),s.html(p),n.html(m),e(".user-name").length>0&&(e("input[name=name]").val(t.user.name),e("input[name=email]").val(t.user.email),e("input[name=phone]").val(t.user.cell),e('input[name="phone_#"]').val(t.user.cell)),e(".fav-section-index").length>0){let t=e("#featured-properties-section");t.html(""),e("#ajax-loader-properties").show(),e.get("/get-featured-properties",function(i,r,o){t.slick("unslick"),e("#ajax-loader-properties").hide(),t.html(i.view),t.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),e('[data-toggle="tooltip"]').tooltip(),e(".favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"add"),e(this).next().show()}),e(".remove-favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"delete"),e(this).prev().show()})})}if(e(".fav-section-detail").length>0){let a=e("#similar-properties-section");e(".display-data").hide(),a.html(""),e(".ajax-loader").show(),e("#ajax-loader-properties").show(),e.get("/get-similar-properties",{property:e("#email-contact-form").find("input[name=property]").val()},function(t,i,r){let o=e(".slick-carousel");e(".display-data").show(),e("#ajax-loader-properties").hide(),o.slick("unslick"),a.html(""),a.html(t.view),o.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]})})}if(e(".detail-page-fav").length>0){let t=e(".detail-page-fav"),o=t.attr("data-id");t.html('<i class="fa fa-spinner fa-spin"></i>'),i=c,r=o,jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/propertyFavorite",data:{property:r},dataType:"json",success:function(t){if(200===t.status){let o='<div class="favorite-property ratings" style="font-size: 20px;">';t.data===i?o+='<a href="javascript:void(0);" style="color: white; display: none" class="detail-favorite" data-id="'+r+'"><i class="fal fa-heart empty-heart"></i></a><a href="javascript:void(0);" style="color: black; display :block"  class="detail-remove-favorite" data-id="'+r+'"><i class="fas fa-heart filled-heart" style="color: red;"></i></a></div>':"not available"===t.data&&(o+='<a href="javascript:void(0);" style="color: white; display:block"  class="detail-favorite" data-id="'+r+'"><i class="fal fa-heart empty-heart"></i></a><a href="javascript:void(0);" style="color: black; display :none" class="detail-remove-favorite" data-id="'+r+'"><i class="fas fa-heart filled-heart" style="color: red;"></i></a></div>');let s=e(".detail-page-fav");s.html(""),s.html(o),e(".detail-favorite").on("click",function(t){let i=e(".detail-favorite");i.hide(),a(e(this).data("id"),e(this),"add"),i.next().show()}),e(".detail-remove-favorite").on("click",function(t){let i=e(".detail-remove-favorite");i.hide(),a(e(this).data("id"),e(this),"delete"),i.prev().show()})}},error:function(e,a,t){},complete:function(e,a){}})}}else t.error&&(e("div.help-block small").html(t.error.password),e(".error-tag").show());var i,r},error:function(e,a,i){t.preventDefault()},complete:function(e,a){}}))}),e("#admin-logout-btn").click(function(a){a.preventDefault(),jQuery.ajax({type:"get",url:window.location.origin+"/admin/admin-logout",success:function(a){if(a.data){let a=e(".user-dropdown");a.html("");let t=' <a class="nav-link" data-toggle="modal" data-target="#exampleModalCenter"\n                                   href="javascript:void(0);" id="navbarDropdownMenuLink5" aria-haspopup="true" aria-expanded="false">\n                                    <i class="fas fa-user mr-3"></i>\n                                </a>';e("#adminLogoutModal").modal("hide"),a.html(t),e("#exampleModalCenter").modal("show")}}})}),e("#btnAccept").click(function(){!function(e,a,t){var i="";if(t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3),i="; expires="+r.toUTCString()}document.cookie=e+"="+(a||"")+i+"; path=/"}("allowCookies","1",7),e(".toast").hide()}),i()}),e(".custom-file-input").on("change",function(){var a=e(this).val().split("\\").pop();e(this).siblings(".custom-file-label").addClass("selected").html(a)})}(jQuery);
