!function(e){function a(a,t,i){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"get",url:"add"===i?window.location.origin+"/dashboard/properties/"+a+"/favorites":window.location.origin+"/dashboard/properties/"+a+"/favorites/1",dataType:"json",success:function(e){},error:function(e,a,t){console.log(t)},complete:function(e,a){}})}function t(a){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"get",url:window.location.origin+"/locations",data:{city:a},dataType:"json",success:function(a){let t=a.data;if(!jQuery.isEmptyObject({locations:t})){let t=e(".location-datalist"),i="";e.each(a.data,function(e,a){i+='<option value="'+a.name+'">'}),t.html(i)}},error:function(e,a,t){},complete:function(e,a){}})}function i(){(function(e){for(var a=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(a))return o.substring(a.length,o.length)}return null})("allowCookies")||e(".toast").show()}e("#btnDeny").click(()=>{!function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}("allowCookies"),e(".toast").toast("hide")}),e(document).ready(function(){e("#search-property-ref").submit(function(a){var t;a.preventDefault(),t=e("#ref-id").val(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/searchWithID",data:{id:t},success:function(a){200===a.status?location.assign(a.data):e("#property_id-error").text(a.data)},error:function(e,a,t){},complete:function(e,a){}})}),e(".index-form").submit(function(a){a.preventDefault(),function(){let a=window.location.origin,t="",i="",o="",r="",n="",s="",l="",c="",d="",p="",h="",u="";i=e("[name = property_purpose]").val(),o=e("[name = property_type]").val(),r=e("[name = city]").val(),s=e("[name = min_price]").val(),l=e("[name = max_price]").val(),c=e("[name = min_area]").val(),d=e("[name = max_area]").val(),p=e("[name = property_area_unit]").val(),n=e("[name = bedrooms]").val(),u=e("[name^= property_subtype-"+o+"]").val(),h=e("#location").val(),t=a+"/",t+=null==u?o.toLowerCase():u.replace(/ /g,"-").toLowerCase(),t+="_for_",t+="Buy"===i?"sale":i.toLowerCase(),(c<0||d<0)&&(c="",d=""),t+="/"+r.replace(/ /g,"-").toLowerCase()+"?",""!==h&&(t+="location="+h.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==s&&null!==s&&(t+="&min_price="+s),"Any"!==l&&null!==l&&(t+="&max_price="+l),"0"!==c&&null!==c&&""!==c&&(t+="&min_area="+c),"Any"!==d&&null!==d&&""!==d&&(t+="&max_area="+d),"All"!==n&&null!==n&&(t+="&bedrooms="+n),t+="&area_unit="+p.replace(" ","-").toLowerCase(),t+="&sort=newest",window.location.href=t}()}),e(".index-form-2").submit(function(a){a.preventDefault(),function(){let a=window.location.origin,t="",i="",o="",r="",n="",s="",l="",c="",d="",p="",h="";t=e("#search2-property-purpose").val(),i=e("#search2-property-type").val(),o=e("#search2-city").val(),n=e("#search2-select-min-price").val(),s=e("#search2-select-max-price").val(),l=e("#search2-select-min-area").val(),c=e("#search2-select-max-area").val(),d=e("[name = search2-unit]").val(),r=e("#search2-beds").val(),h=e("[id^= search2-subtype-"+i+"]").val(),p=e("#search2-location").val();let u=a+"/";u+=null==h?i.toLowerCase():h.replace(/ /g,"-").toLowerCase(),u+="_for_",u+="Buy"===t?"sale":t.toLowerCase(),u+="/"+o.replace(/ /g,"-").toLowerCase()+"?",""!==p&&(u+="location="+p.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==n&&null!==n&&(u+="&min_price="+n),"Any"!==s&&null!==s&&(u+="&max_price="+s),"0"!==l&&null!==l&&""!==l&&(u+="&min_area="+l),"Any"!==c&&null!==c&&""!==c&&(u+="&max_area="+c),"All"!==r&&null!==r&&(u+="&bedrooms="+r),u+="&area_unit="+d.replace(" ","-").toLowerCase(),u+="&sort=newest",window.location.href=u}()}),e(".favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"add"),e(this).next().show()}),e(".remove-favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"delete"),e(this).prev().show()}),e(".detail-favorite").on("click",function(t){let i=e(".detail-favorite");i.hide(),a(e(this).data("id"),e(this),"add"),i.next().show()}),e(".detail-remove-favorite").on("click",function(t){let i=e(".detail-remove-favorite");i.hide(),a(e(this).data("id"),e(this),"delete"),i.prev().show()});let o=e(".property-type-select2");o.on("change",function(a){const t=e(this).val();"Plots"===t||"Commercial"===t?e(".beds-block").hide():e(".beds-block").show(),e("[id^=property_subtype-]").hide(),e("[id^=search2-property_subtype-]").hide(),e("#property_subtype-"+t).toggle(),e("#search2-property_subtype-"+t).toggle()}),"Plots"===o.val()&&e(".beds-block").hide();let r="";function n(a){let t=["500,000","1,000,000","2,000,000","3,500,000","5,000,000","6,500,000","8,000,000","10,000,000","12,500,000","15,000,000","17,500,000","20,000,000","25,000,000","30,000,000","40,000,000","50,000,000","75,000,000","100,000,000","250,000,000","500,000,000","1,000,000,000","5,000,000,000"];e("#select-max-price option").remove(),e("#search2-select-max-price option").remove();var i=e("#select-max-price"),o=e("#search2-select-max-price");i.append('<option selected="selected" value="Any">Any</option>'),o.append('<option selected="selected" value="Any">Any</option>');for(let e=a;e<t.length;e++)i.append("<option value="+t[e]+">"+t[e]+"</option>");for(let e=a+1;e<t.length;e++)o.append("<option value="+t[e]+">"+t[e]+"</option>")}e(".detail-page-banner").is(":visible")?(r=o.val(),t(e("#city option:selected").val())):(r=e("#search2-property-type").val(),t(e("#search2-city option:selected").val())),e("[id^=search2-property_subtype-]").hide(),e("[id^=-property_subtype-]").hide(),e("#search2-property_subtype-"+r).toggle(),e("#property_subtype-"+r).toggle(),e("#select-min-price").on("change",function(a){n(e("#select-min-price option:selected").data("index"))}),e("#search2-select-min-price").on("change",function(a){n(e("#search2-select-min-price option:selected").data("index"))}),e("#city").on("change",function(a){t(e("#city option:selected").val())}),e("#search2-city").on("change",function(a){t(e("#search2-city option:selected").val())}),e(".reset-search-option").on("click",function(){e("#location").val(""),e("input[name=area_unit]").val("Marla"),e(".index-form").trigger("reset"),e(".index-form-2").trigger("reset"),e(".custom-select").data("index","0").trigger("change"),sessionStorage.clear()}),e(".reset-search-banner2, #reset-search-banner2lg").on("click",function(){e.each(e(".custom-select"),function(a,t){~t.id.indexOf("purpose")&&e(this).val("Buy").trigger("change"),~t.id.indexOf("type")&&e(this).val("Homes").trigger("change"),~t.id.indexOf("city")&&e(this).val("Islamabad").trigger("change"),~t.id.indexOf("beds")&&e(this).val("All").trigger("change"),~t.id.indexOf("min-price")&&e(this).val("0").trigger("change"),~t.id.indexOf("max-price")&&e(this).val("Any").trigger("change"),~t.id.indexOf("min-area")&&e(this).val("0").trigger("change"),~t.id.indexOf("max-area")&&e(this).val("Any").trigger("change"),~t.id.indexOf("area-unit")&&e(this).val("Marla").trigger("change")}),sessionStorage.clear(),e(".index-form").trigger("reset"),e(".index-form-2").trigger("reset"),e("#search2-location").val(""),e("#location").val("")}),e(document.body).on("change","[name=max_area]",function(){let a=e(this).val();sessionStorage.setItem("max_area",a)}),e(document.body).on("change","[name=min_area]",function(){let a=e(this).val();sessionStorage.setItem("min_area",a)}),null!==sessionStorage.getItem("max_area")&&(e("#select-max-area").val(parseInt(sessionStorage.getItem("max_area"))),e("#search2-select-max-area").val(parseInt(sessionStorage.getItem("max_area")))),null!==sessionStorage.getItem("min_area")&&(e("#select-min-area").val(parseInt(sessionStorage.getItem("min_area"))),e("#search2-select-min-area").val(parseInt(sessionStorage.getItem("min_area"))));let s=e("#sign-in-card");s.validate({rules:{email:{required:!0},password:{required:!0}},messages:{},errorElement:"small",errorClass:"help-block text-red",submitHandler:function(e){event.preventDefault()},invalidHandler:function(a,t){const i=t.numberOfInvalids();if(i){let a=e("div.error.text-red");a.hide();const t=1===i?"You missed 1 field. It has been highlighted":"You missed "+i+" fields. They have been highlighted";e("div.error.text-red span").html(t),a.show()}else e("div.error.text-red").hide()}}),e("#sign-in-btn").click(function(t){s.valid()&&(t.preventDefault(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),t.preventDefault(),jQuery.ajax({type:"post",url:window.location.origin+"/login",data:s.serialize(),dataType:"json",success:function(t){if(t.data){e(".error-tag").hide(),e("#exampleModalCenter").modal("hide");let r=e(".user-dropdown"),n=e(".nav-property-link"),s=e(".nav-profile-link");r.html(""),n.html(""),s.html("");let l=t.user.name,c=t.user.id,d='            <div class="dropdown">                <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" href="javascript:void(0);" id="dropdownMenuButton" aria-haspopup="true"                    aria-expanded="false">                      <i class="fas fa-user mr-3"></i>';d+='<span class="mr-1"> Logged in as <span>'+l+" (ID: "+c+")",d+='</a>                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">',d+='<a class="dropdown-item" href=" '+window.location.origin+"/dashboard/accounts/users/"+c+'/edit"><i class="far fa-user-cog mr-2"></i>Manage Profile</a>                     <div class="dropdown-divider"></div><a class="dropdown-item" href=" '+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+c+'/sort/id/order/asc/page/10"><i class="fa fa-building-o mr-2"></i>Property Management </a>                     <div class="dropdown-divider"></div>                          <a class="dropdown-item" href="'+window.location.origin+'/dashboard/accounts/logout"><i class="far fa-sign-out mr-2"></i>Logout</a>',d+="</div></div>";let p='<a class="nav-link theme-dark-blue" href="'+window.location.origin+"/dashboard/accounts/users/"+c+'/edit" >Profile Management</a>',h='<a class="nav-link theme-dark-blue" href=" '+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+c+'/sort/id/order/asc/page/10"> Property Management </a>';if(r.html(d),n.html(h),s.html(p),e(".user-name").length>0&&(e("input[name=name]").val(t.user.name),e("input[name=email]").val(t.user.email)),e(".fav-section-index").length>0){let t=e("#featured-properties-section");t.html(""),e("#ajax-loader-properties").show(),e.get("/get-featured-properties",function(i,o,r){t.slick("unslick"),e("#ajax-loader-properties").hide(),t.html(i.view),t.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),e('[data-toggle="tooltip"]').tooltip(),e(".favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"add"),e(this).next().show()}),e(".remove-favorite").on("click",function(t){e(this).hide(),a(e(this).data("id"),e(this),"delete"),e(this).prev().show()})})}if(e(".fav-section-detail").length>0){let a=e("#similar-properties-section");e(".display-data").hide(),a.html(""),e(".ajax-loader").show(),e("#ajax-loader-properties").show(),e.get("/get-similar-properties",{property:e("#email-contact-form").find("input[name=property]").val()},function(t,i,o){let r=e(".slick-carousel");e(".display-data").show(),e("#ajax-loader-properties").hide(),r.slick("unslick"),a.html(""),a.html(t.view),r.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]})})}if(e(".detail-page-fav").length>0){let t=e(".detail-page-fav"),r=t.attr("data-id");t.html('<i class="fa fa-spinner fa-spin"></i>'),i=c,o=r,jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/propertyFavorite",data:{property:o},dataType:"json",success:function(t){if(200===t.status){let r='<div class="favorite-property ratings" style="font-size: 20px;">';t.data===i?r+='<a href="javascript:void(0);" style="color: white; display: none" class="detail-favorite" data-id="'+o+'"><i class="fal fa-heart empty-heart"></i></a><a href="javascript:void(0);" style="color: black; display :block"  class="detail-remove-favorite" data-id="'+o+'"><i class="fas fa-heart filled-heart" style="color: red;"></i></a></div>':"not available"===t.data&&(r+='<a href="javascript:void(0);" style="color: white; display:block"  class="detail-favorite" data-id="'+o+'"><i class="fal fa-heart empty-heart"></i></a><a href="javascript:void(0);" style="color: black; display :none" class="detail-remove-favorite" data-id="'+o+'"><i class="fas fa-heart filled-heart" style="color: red;"></i></a></div>');let n=e(".detail-page-fav");n.html(""),n.html(r),e(".detail-favorite").on("click",function(t){let i=e(".detail-favorite");i.hide(),a(e(this).data("id"),e(this),"add"),i.next().show()}),e(".detail-remove-favorite").on("click",function(t){let i=e(".detail-remove-favorite");i.hide(),a(e(this).data("id"),e(this),"delete"),i.prev().show()})}},error:function(e,a,t){},complete:function(e,a){}})}}else t.error&&(e("div.help-block small").html(t.error.password),e(".error-tag").show());var i,o},error:function(e,a,i){t.preventDefault()},complete:function(e,a){}}))}),e("#admin-logout-btn").click(function(a){a.preventDefault(),jQuery.ajax({type:"get",url:window.location.origin+"/admin/admin-logout",success:function(a){if(a.data){let a=e(".user-dropdown");a.html("");let t=' <a class="nav-link" data-toggle="modal" data-target="#exampleModalCenter"\n                                   href="javascript:void(0);" id="navbarDropdownMenuLink5" aria-haspopup="true" aria-expanded="false">\n                                    <i class="fas fa-user mr-3"></i>\n                                </a>';e("#adminLogoutModal").modal("hide"),a.html(t),e("#exampleModalCenter").modal("show")}}})}),e("#btnAccept").click(()=>{!function(e,a,t){var i="";if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(a||"")+i+"; path=/"}("allowCookies","1",7),e(".toast").hide()}),i()})}(jQuery);
