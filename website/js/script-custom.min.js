(function(a){function y(d){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}});jQuery.ajax({type:"post",url:window.location.origin+"/searchWithID",data:{id:d},success:function(e){200===e.status?location.assign(e.data):a("#property_id-error").text(e.data)},error:function(e,f,g){console.log(e);console.log(f);console.log(g)},complete:function(e,f){}})}function w(d,e,f){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}});jQuery.ajax({type:"get",
url:"add"===f?window.location.origin+"/dashboard/properties/"+d+"/favorites":window.location.origin+"/dashboard/properties/"+d+"/favorites/1",dataType:"json",success:function(g){},error:function(g,c,b){console.log(b)},complete:function(g,c){}})}function u(d){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}});jQuery.ajax({type:"get",url:window.location.origin+"/locations",data:{city:d},dataType:"json",success:function(e){if(!jQuery.isEmptyObject({locations:e.data})){var f=
a(".location-datalist"),g="";a.each(e.data,function(c,b){g+='<option value="'+b.name+'">'});f.html(g)}},error:function(e,f,g){console.log(g);console.log(f);console.log(e)},complete:function(e,f){}})}function z(d,e,f,g){d='                       <div class="form-group">                           <div class="index-page-select" style="padding: 0;">                               <label class="search2-input-label min-area-label" for="search2-select-min-area"> MIN AREA</label>                               <select class="custom-select custom-select-sm select2bs4 select2-hidden-accessible" id="search2-select-min-area" style="width: 100%;" tabindex="-1" aria-hidden="true" aria-describedby="unit-error" aria-invalid="false" name="min_area">';
d="0"===sessionStorage.getItem("min_area")?d+'   <option value="0" selected>0</option>':d+'  <option value="0">0</option>';d=d+f+"                    </select>                           </div>                       </div>";f='    <div class="form-group">                           <div class="index-page-select" style="padding: 0">                               <label class="search2-input-label max-area-label" for="search2-select-max-area">MAX AREA</label>                               <select class="custom-select custom-select-sm select2bs4 select2-hidden-accessible" id="search2-select-max-area" style="width: 100%;" tabindex="-1" aria-hidden="true" aria-describedby="unit-error" aria-invalid="false" name="max_area">';
f="any"===sessionStorage.getItem("max_area")?f+'   <option value="Any" selected>Any</option>':f+'   <option value="Any" >Any</option>';f=f+g+"                   </select>                             </div>                           </div>";a("#search2-min-area").html(d);a("#search2-max-area").html(f);a("#search2-select-max-area").select2();a("#search2-select-min-area").select2()}function x(d,e){a("#select-max-area option").remove();a("#search2-select-max-area option").remove();var f=a("#select-max-area"),
g=a("#search2-select-max-area");f.append('<option selected value="Any">Any</option>');g.append('<option selected value="Any">Any</option>');for(var c=d;c<e.length;c++)f.append("<option value="+e[c]+">"+e[c]+"</option>"),g.append("<option value="+e[c]+">"+e[c]+"</option>")}function A(d){var e="",f="",g="",c="2 3 5 8 10 15 20 30 40 50".split(" "),b="50 60 70 80 100 120 150 200 250 300, 350 400 450 500 1000 2000 4000".split(" "),h="1 2 3 4 5 6 7 8 10 12 15 20 30 50 100".split(" "),m="450 675 1,125 1,800 2,250 3,375 4500 6,750 9,000 11,250".split(" "),
n="50 80 130 200 250 380 510 760 1,000 1,300 1,900 2,500 3,800 5,100 6,300 13,000 19,000 2500 51,000".split(" ");if("Square Yards"===d){var l=b;e="SQ.YD."}else"Square Feet"===d?(l=m,e="SQ.FT."):"Square Meters"===d?(l=n,e="SQ.M."):"Marla"===d?(l=c,e="marla"):"Kanal"===d&&(l=h,e="kanal");a.each(l,function(p,k){p+1<l.length&&sessionStorage.getItem("min_area")===k&&(f+='<option value="'+k+'" data-index="'+(p+1)+'" selected>'+k+"</option>");f+='<option value="'+k+'" data-index="'+(p+1)+'">'+k+"</option>"});
a.each(l,function(p,k){sessionStorage.getItem("max_area")===k&&(g+='<option value="'+k+'" data-index="'+(p+1)+'" selected>'+k+"</option>");g+='<option value="'+k+'" data-index="'+(p+1)+'">'+k+"</option>"});d.toLowerCase().replace(" ","_");d="";d='<div class="row">       <div class="col-sm-6" style="padding-right:0; border-right:1px solid #ced4da">           <div class="label-container"><label class="input-label min-area-label" for="select-min-area">MIN AREA</label></div>           <div class="index-page-select">               <select class="custom-select custom-select-sm select2bs4 select2-hidden-accessible" id="select-min-area"                       style="width: 100%;" tabindex="-1" aria-hidden="true" aria-describedby="unit-error" aria-invalid="false" name="min_area">';
d="0"===sessionStorage.getItem("min_area")?d+'   <option data-index="0" value="0" selected>0</option>':d+'  <option data-index="0" value="0">0</option>';d=d+f+'        </select>               </div>           </div>        <div class="col-sm-6" style="padding-left: 0;">           <div class="label-container"><label class="input-label max-area-label" for="select-max-area">MAX AREA</label></div>           <div class="index-page-select">               <select class="custom-select custom-select-sm select2bs4 select2-hidden-accessible" id="select-max-area" style="width: 100%; border:0" tabindex="-1" aria-hidden="true" aria-describedby="unit-error" aria-invalid="false" name="max_area">';
d="any"===sessionStorage.getItem("max_area")?d+'   <option data-index="0" value="Any" selected>Any</option>':d+'   <option data-index="0" value="Any" >Any</option>';d=d+g+"               </select>           </div>       </div></div>";a("#area-container").html(d);d=a("#select-min-area");a("#select-max-area").select2();d.select2();z(l,e,f,g);d.on("change",function(p){x(a("#select-min-area option:selected").data("index"),l)});a("#search2-select-min-area").on("change",function(p){x(a("#search2-select-min-area option:selected").data("index"),
l)})}a(document).ready(function(){function d(c){var b="500,000 1,000,000 2,000,000 3,500,000 5,000,000 6,500,000 8,000,000 10,000,000 12,500,000 15,000,000 17,500,000 20,000,000 25,000,000 30,000,000 40,000,000 50,000,000 75,000,000 100,000,000 250,000,000 500,000,000 1,000,000,000 5,000,000,000".split(" ");a("#select-max-price option").remove();a("#search2-select-max-price option").remove();var h=a("#select-max-price"),m=a("#search2-select-max-price");h.append('<option selected="selected" value="Any">Any</option>');
m.append('<option selected="selected" value="Any">Any</option>');for(var n=c;n<b.length;n++)h.append("<option value="+b[n]+">"+b[n]+"</option>");for(c+=1;c<b.length;c++)m.append("<option value="+b[c]+">"+b[c]+"</option>")}a("#search-property-ref").submit(function(c){c.preventDefault();y(a("#ref-id").val())});a(".index-form").submit(function(c){c.preventDefault();var b=window.location.origin;c=a("[name = property_purpose]").val();var h=a("[name = property_type]").val();var m=a("[name = city]").val();
var n=a("[name = min_price]").val();var l=a("[name = max_price]").val();var p=a("[name = min_area]").val();var k=a("[name = max_area]").val();var v=a("[name = property_area_unit]").val();var q=a("[name = bedrooms]").val();var r=a("[name^= property_subtype-"+h+"]").val();var t=a("#location").val();b+="/";b=null==r?b+h.toLowerCase():b+r.replace(/ /g,"-").toLowerCase();b+="_for_";b="Buy"===c?b+"sale":b+c.toLowerCase();b+="/"+m.replace(/ /g,"-").toLowerCase()+"?";""!==t&&(b+="location="+t.replace(/-/g,
"_").replace(/ /g,"-").toLowerCase());"0"!==n&&null!==n&&(b+="&min_price="+n);"Any"!==l&&null!==l&&(b+="&max_price="+l);"0"!==p&&null!==p&&(b+="&min_area="+p);"Any"!==k&&null!==k&&(b+="&max_area="+k);"All"!==q&&null!==q&&(b+="&bedrooms="+q);b+="&area_unit="+v.replace(" ","-").toLowerCase();window.location.href=b+"&sort=newest"});a(".index-form-2").submit(function(c){c.preventDefault();var b=window.location.origin;c=a("#search2-property-purpose").val();var h=a("#search2-property-type").val();var m=
a("#search2-city").val();var n=a("#search2-select-min-price").val();var l=a("#search2-select-max-price").val();var p=a("#search2-select-min-area").val();var k=a("#search2-select-max-area").val();var v=a("[name = search2-unit]").val();var q=a("#search2-beds").val();var r=a("[id^= search2-subtype-"+h+"]").val();var t=a("#search2-location").val();b+="/";b=null==r?b+h.toLowerCase():b+r.replace(/ /g,"-").toLowerCase();b+="_for_";b="Buy"===c?b+"sale":b+c.toLowerCase();b+="/"+m.replace(/ /g,"-").toLowerCase()+
"?";""!==t&&(b+="location="+t.replace(/-/g,"_").replace(/ /g,"-").toLowerCase());"0"!==n&&null!==n&&(b+="&min_price="+n);"Any"!==l&&null!==l&&(b+="&max_price="+l);"0"!==p&&null!==p&&(b+="&min_area="+p);"Any"!==k&&null!==k&&(b+="&max_area="+k);"All"!==q&&null!==q&&(b+="&bedrooms="+q);b+="&area_unit="+v.replace(" ","-").toLowerCase();window.location.href=b+"&sort=newest"});a(".favorite").on("click",function(c){a(this).hide();w(a(this).data("id"),a(this),"add");a(this).next().show()});a(".remove-favorite").on("click",
function(c){a(this).hide();w(a(this).data("id"),a(this),"delete");a(this).prev().show()});var e=a(".property-type-select2");e.on("change",function(c){c=a(this).val();"Plots"===c||"Commercial"===c?a(".beds-block").hide():a(".beds-block").show();a("[id^=property_subtype-]").hide();a("[id^=search2-property_subtype-]").hide();a("#property_subtype-"+c).toggle();a("#search2-property_subtype-"+c).toggle()});"Plots"===e.val()&&a(".beds-block").hide();var f="";a(".detail-page-banner").is(":visible")?(f=e.val(),
u(a("#city option:selected").val())):(f=a("#search2-property-type").val(),u(a("#search2-city option:selected").val()));a("[id^=search2-property_subtype-]").hide();a("[id^=-property_subtype-]").hide();a("#search2-property_subtype-"+f).toggle();a("#property_subtype-"+f).toggle();a("#select-min-price").on("change",function(c){d(a("#select-min-price option:selected").data("index"))});a("#search2-select-min-price").on("change",function(c){d(a("#search2-select-min-price option:selected").data("index"))});
a("#city").on("change",function(c){u(a("#city option:selected").val())});a("#search2-city").on("change",function(c){u(a("#search2-city option:selected").val())});a(".reset-search-option").on("click",function(){a("#location").val("");a("input[name=area_unit]").val("Marla");a(".index-form").trigger("reset");a(".custom-select").data("index","0").trigger("change");sessionStorage.setItem("max_area","Any");sessionStorage.setItem("min_area",0)});a(".reset-search-banner2, #reset-search-banner2lg").on("click",
function(){a.each(a(".custom-select"),function(c,b){~b.id.indexOf("purpose")&&a(this).val("Buy").trigger("change");~b.id.indexOf("type")&&a(this).val("Homes").trigger("change");~b.id.indexOf("city")&&a(this).val("Islamabad").trigger("change");~b.id.indexOf("beds")&&a(this).val("All").trigger("change");~b.id.indexOf("min-price")&&a(this).val("0").trigger("change");~b.id.indexOf("max-price")&&a(this).val("Any").trigger("change");~b.id.indexOf("min-area")&&a(this).val("0").trigger("change");~b.id.indexOf("max-area")&&
a(this).val("Any").trigger("change");~b.id.indexOf("area-unit")&&a(this).val("Marla").trigger("change")});sessionStorage.setItem("max_area","Any");sessionStorage.setItem("min_area",0);a("#search2-location").val("");a("#location").val("")});a(document.body).on("change","[name=max_area]",function(){var c=a(this).val();sessionStorage.setItem("max_area",c)});a(document.body).on("change","[name=min_area]",function(){var c=a(this).val();sessionStorage.setItem("min_area",c)});A("Marla");var g=a("#sign-in-card");
g.validate({rules:{email:{required:!0},password:{required:!0}},messages:{},errorElement:"small",errorClass:"help-block text-red",submitHandler:function(c){event.preventDefault()},invalidHandler:function(c,b){var h=b.numberOfInvalids();if(h){var m=a("div.error.text-red");m.hide();h=1===h?"You missed 1 field. It has been highlighted":"You missed "+h+" fields. They have been highlighted";a("div.error.text-red span").html(h);m.show()}else a("div.error.text-red").hide()}});a("#sign-in-btn").click(function(c){g.valid()&&
(c.preventDefault(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}}),c.preventDefault(),jQuery.ajax({type:"post",url:window.location.origin+"/login",data:g.serialize(),dataType:"json",success:function(b){if(b.data){a(".error-tag").hide();a("#exampleModalCenter").modal("hide");var h=a(".user-dropdown");h.html("");var m=b.user.id;var n='            <div class="dropdown">                <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" href="javascript:void(0);" id="dropdownMenuButton" aria-haspopup="true"                    aria-expanded="false">                      <i class="fas fa-user mr-3"></i><span class="mr-1"> Logged in as <span>'+
(b.user.name+" (ID: "+m+')</a>                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">');n+='<a class="dropdown-item" href=" '+window.location.origin+"/dashboard/accounts/users/"+m+'/edit"><i class="far fa-user-cog mr-2"></i>Manage Profile</a>                     <div class="dropdown-divider"></div><a class="dropdown-item" href=" '+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+m+'/sort/id/order/asc/page/10"><i class="fa fa-building-o mr-2"></i>Property Management </a>                     <div class="dropdown-divider"></div>                          <a class="dropdown-item" href="'+
window.location.origin+'/dashboard/accounts/logout"><i class="far fa-sign-out mr-2"></i>Logout</a>';h.html(n+"</div></div>");0<a(".user-name").length&&(a("input[name=name]").val(b.user.name),a("input[name=email]").val(b.user.email))}else b.error&&(a("div.help-block small").html(b.error.password),a(".error-tag").show())},error:function(b,h,m){c.preventDefault();console.log(m);console.log(h);console.log(b)},complete:function(b,h){}}))})})})(jQuery);