(function(a){function b(){let b=window.location.origin,c="",d="",e="",f="",g="",h="",i="",j="",k="",l="",m="",n="";d=a("[name = property_purpose]").val(),e=a("[name = property_type]").val(),f=a("[name = city]").val(),h=a("[name = min_price]").val(),i=a("[name = max_price]").val(),j=a("[name = min_area]").val(),k=a("[name = max_area]").val(),l=a("[name = property_area_unit]").val(),g=a("[name = bedrooms]").val(),n=a("[name^= property_subtype-"+e+"]").val(),m=a("#location").val(),c=b+"/",c+=null==n?e.toLowerCase():n.replace(/ /g,"-").toLowerCase(),c+="_for_",c+="Buy"===d?"sale":d.toLowerCase(),(0>j||0>k)&&(j="",k=""),c+="/"+f.replace(/ /g,"-").toLowerCase()+"?",""!==m&&(c+="location="+m.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==h&&null!==h&&(c+="&min_price="+h),"Any"!==i&&null!==i&&(c+="&max_price="+i),"0"!==j&&null!==j&&""!==j&&(c+="&min_area="+j),"Any"!==k&&null!==k&&""!==k&&(c+="&max_area="+k),"All"!==g&&null!==g&&(c+="&bedrooms="+g),c+="&area_unit="+l.replace(" ","-").toLowerCase(),c+="&sort=newest",window.location.href=c}function c(){let b=window.location.origin,c="",d="",e="",f="",g="",h="",i="",j="",k="",l="",m="";c=a("#search2-property-purpose").val(),d=a("#search2-property-type").val(),e=a("#search2-city").val(),g=a("#search2-select-min-price").val(),h=a("#search2-select-max-price").val(),i=a("#search2-select-min-area").val(),j=a("#search2-select-max-area").val(),k=a("[name = search2-unit]").val(),f=a("#search2-beds").val(),m=a("[id^= search2-subtype-"+d+"]").val(),l=a("#search2-location").val();let n=b+"/";n+=null==m?d.toLowerCase():m.replace(/ /g,"-").toLowerCase(),n+="_for_",n+="Buy"===c?"sale":c.toLowerCase(),n+="/"+e.replace(/ /g,"-").toLowerCase()+"?",""!==l&&(n+="location="+l.replace(/-/g,"_").replace(/ /g,"-").toLowerCase()),"0"!==g&&null!==g&&(n+="&min_price="+g),"Any"!==h&&null!==h&&(n+="&max_price="+h),"0"!==i&&null!==i&&""!==i&&(n+="&min_area="+i),"Any"!==j&&null!==j&&""!==j&&(n+="&max_area="+j),"All"!==f&&null!==f&&(n+="&bedrooms="+f),n+="&area_unit="+k.replace(" ","-").toLowerCase(),n+="&sort=newest",window.location.href=n}function d(b){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a("meta[name=\"csrf-token\"]").attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/searchWithID",data:{id:b},success:function(b){200===b.status?location.assign(b.data):a("#property_id-error").text(b.data)},error:function(){},complete:function(){}})}function e(b,c,d){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a("meta[name=\"csrf-token\"]").attr("content")}}),jQuery.ajax({type:"get",url:"add"===d?window.location.origin+"/dashboard/properties/"+b+"/favorites":window.location.origin+"/dashboard/properties/"+b+"/favorites/1",dataType:"json",success:function(){},error:function(a,b,c){console.log(c)},complete:function(){}})}function f(b){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a("meta[name=\"csrf-token\"]").attr("content")}}),jQuery.ajax({type:"get",url:window.location.origin+"/locations",data:{city:b},dataType:"json",success:function(b){let c=b.data;if(!jQuery.isEmptyObject({locations:c})){let c=a(".location-datalist"),d="";a.each(b.data,function(a,b){d+="<option value=\""+b.name+"\">"}),c.html(d)}},error:function(){},complete:function(){}})}function g(b,c){jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a("meta[name=\"csrf-token\"]").attr("content")}}),jQuery.ajax({type:"post",url:window.location.origin+"/propertyFavorite",data:{property:c},dataType:"json",success:function(d){if(200===d.status){let f="<div class=\"favorite-property ratings\" style=\"font-size: 20px;\">";d.data===b?f+="<a href=\"javascript:void(0);\" style=\"color: white; display: none\" class=\"detail-favorite\" data-id=\""+c+"\"><i class=\"fal fa-heart empty-heart\"></i></a><a href=\"javascript:void(0);\" style=\"color: black; display :block\"  class=\"detail-remove-favorite\" data-id=\""+c+"\"><i class=\"fas fa-heart filled-heart\" style=\"color: red;\"></i></a></div>":"not available"===d.data&&(f+="<a href=\"javascript:void(0);\" style=\"color: white; display:block\"  class=\"detail-favorite\" data-id=\""+c+"\"><i class=\"fal fa-heart empty-heart\"></i></a><a href=\"javascript:void(0);\" style=\"color: black; display :none\" class=\"detail-remove-favorite\" data-id=\""+c+"\"><i class=\"fas fa-heart filled-heart\" style=\"color: red;\"></i></a></div>");let g=a(".detail-page-fav");g.html(""),g.html(f),a(".detail-favorite").on("click",function(){let b=a(".detail-favorite");b.hide(),e(a(this).data("id"),a(this),"add"),b.next().show()}),a(".detail-remove-favorite").on("click",function(){let b=a(".detail-remove-favorite");b.hide(),e(a(this).data("id"),a(this),"delete"),b.prev().show()})}},error:function(){},complete:function(){}})}function h(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+1e3*(60*(60*(24*c)))),d="; expires="+e.toUTCString()}document.cookie=a+"="+(b||"")+d+"; path=/"}function i(a){for(var b,d=a+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(b=e[f];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return null}function j(a){document.cookie=a+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function k(){i("allowCookies")||a(".toast").show()}a("#btnDeny").click(()=>{j("allowCookies"),a(".toast").toast("hide")}),a(document).ready(function(){function i(b){let c=["500,000","1,000,000","2,000,000","3,500,000","5,000,000","6,500,000","8,000,000","10,000,000","12,500,000","15,000,000","17,500,000","20,000,000","25,000,000","30,000,000","40,000,000","50,000,000","75,000,000","100,000,000","250,000,000","500,000,000","1,000,000,000","5,000,000,000"];a("#select-max-price option").remove(),a("#search2-select-max-price option").remove();var d=a("#select-max-price"),e=a("#search2-select-max-price");d.append("<option selected=\"selected\" value=\"Any\">Any</option>"),e.append("<option selected=\"selected\" value=\"Any\">Any</option>");for(let a=b;a<c.length;a++)d.append("<option value="+c[a]+">"+c[a]+"</option>");for(let a=b+1;a<c.length;a++)e.append("<option value="+c[a]+">"+c[a]+"</option>")}a("#search-property-ref").submit(function(b){b.preventDefault(),d(a("#ref-id").val())}),a(".index-form").submit(function(a){a.preventDefault(),b()}),a(".index-form-2").submit(function(a){a.preventDefault(),c()}),a(".favorite").on("click",function(){a(this).hide(),e(a(this).data("id"),a(this),"add"),a(this).next().show()}),a(".remove-favorite").on("click",function(){a(this).hide(),e(a(this).data("id"),a(this),"delete"),a(this).prev().show()}),a(".detail-favorite").on("click",function(){let b=a(".detail-favorite");b.hide(),e(a(this).data("id"),a(this),"add"),b.next().show()}),a(".detail-remove-favorite").on("click",function(){let b=a(".detail-remove-favorite");b.hide(),e(a(this).data("id"),a(this),"delete"),b.prev().show()});let j=a(".property-type-select2");j.on("change",function(){const b=a(this).val();"Plots"===b||"Commercial"===b?a(".beds-block").hide():a(".beds-block").show(),a("[id^=property_subtype-]").hide(),a("[id^=search2-property_subtype-]").hide(),a("#property_subtype-"+b).toggle(),a("#search2-property_subtype-"+b).toggle()}),"Plots"===j.val()&&a(".beds-block").hide();let l="";a(".detail-page-banner").is(":visible")?(l=j.val(),f(a("#city option:selected").val())):(l=a("#search2-property-type").val(),f(a("#search2-city option:selected").val())),a("[id^=search2-property_subtype-]").hide(),a("[id^=-property_subtype-]").hide(),a("#search2-property_subtype-"+l).toggle(),a("#property_subtype-"+l).toggle(),a("#select-min-price").on("change",function(){i(a("#select-min-price option:selected").data("index"))}),a("#search2-select-min-price").on("change",function(){i(a("#search2-select-min-price option:selected").data("index"))}),a("#city").on("change",function(){f(a("#city option:selected").val())}),a("#search2-city").on("change",function(){f(a("#search2-city option:selected").val())}),a(".reset-search-option").on("click",function(){a("#location").val(""),a("input[name=area_unit]").val("Marla"),a(".index-form").trigger("reset"),a(".custom-select").data("index","0").trigger("change"),sessionStorage.clear()}),a(".reset-search-banner2, #reset-search-banner2lg").on("click",function(){a.each(a(".custom-select"),function(b,c){!~c.id.indexOf("purpose")||a(this).val("Buy").trigger("change"),!~c.id.indexOf("type")||a(this).val("Homes").trigger("change"),!~c.id.indexOf("city")||a(this).val("Islamabad").trigger("change"),!~c.id.indexOf("beds")||a(this).val("All").trigger("change"),!~c.id.indexOf("min-price")||a(this).val("0").trigger("change"),!~c.id.indexOf("max-price")||a(this).val("Any").trigger("change"),!~c.id.indexOf("min-area")||a(this).val("0").trigger("change"),!~c.id.indexOf("max-area")||a(this).val("Any").trigger("change"),!~c.id.indexOf("area-unit")||a(this).val("Marla").trigger("change")}),sessionStorage.clear(),a("#search2-location").val(""),a("#location").val("")}),a(document.body).on("change","[name=max_area]",function(){let b=a(this).val();sessionStorage.setItem("max_area",b)}),a(document.body).on("change","[name=min_area]",function(){let b=a(this).val();sessionStorage.setItem("min_area",b)}),null!==sessionStorage.getItem("max_area")&&(a("#select-max-area").val(parseInt(sessionStorage.getItem("max_area"))),a("#search2-select-max-area").val(parseInt(sessionStorage.getItem("max_area")))),null!==sessionStorage.getItem("min_area")&&(a("#select-min-area").val(parseInt(sessionStorage.getItem("min_area"))),a("#search2-select-min-area").val(parseInt(sessionStorage.getItem("min_area"))));let m=a("#sign-in-card");m.validate({rules:{email:{required:!0},password:{required:!0}},messages:{},errorElement:"small",errorClass:"help-block text-red",submitHandler:function(){event.preventDefault()},invalidHandler:function(b,c){const d=c.numberOfInvalids();if(d){let b=a("div.error.text-red");b.hide();const c=1===d?"You missed 1 field. It has been highlighted":"You missed "+d+" fields. They have been highlighted";a("div.error.text-red span").html(c),b.show()}else a("div.error.text-red").hide()}}),a("#sign-in-btn").click(function(b){m.valid()&&(b.preventDefault(),jQuery.ajaxSetup({headers:{"X-CSRF-TOKEN":a("meta[name=\"csrf-token\"]").attr("content")}}),b.preventDefault(),jQuery.ajax({type:"post",url:window.location.origin+"/login",data:m.serialize(),dataType:"json",success:function(b){if(b.data){a(".error-tag").hide(),a("#exampleModalCenter").modal("hide");let c=a(".user-dropdown");c.html("");let d=b.user.name,f=b.user.id,h="            <div class=\"dropdown\">                <a class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" href=\"javascript:void(0);\" id=\"dropdownMenuButton\" aria-haspopup=\"true\"                    aria-expanded=\"false\">                      <i class=\"fas fa-user mr-3\"></i>";if(h+="<span class=\"mr-1\"> Logged in as <span>"+d+" (ID: "+f+")",h+="</a>                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">",h+="<a class=\"dropdown-item\" href=\" "+window.location.origin+"/dashboard/accounts/users/"+f+"/edit\"><i class=\"far fa-user-cog mr-2\"></i>Manage Profile</a>                     <div class=\"dropdown-divider\"></div><a class=\"dropdown-item\" href=\" "+window.location.origin+"/dashboard/listings/status/active/purpose/all/user/"+f+"/sort/id/order/asc/page/10\"><i class=\"fa fa-building-o mr-2\"></i>Property Management </a>                     <div class=\"dropdown-divider\"></div>                          <a class=\"dropdown-item\" href=\""+window.location.origin+"/dashboard/accounts/logout\"><i class=\"far fa-sign-out mr-2\"></i>Logout</a>",h+="</div></div>",c.html(h),0<a(".user-name").length&&(a("input[name=name]").val(b.user.name),a("input[name=email]").val(b.user.email)),0<a(".fav-section-index").length){let b=a("#featured-properties-section");b.html(""),a("#ajax-loader-properties").show(),a.get("/get-featured-properties",function(c){b.slick("unslick"),a("#ajax-loader-properties").hide(),b.html(c.view),b.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),a("[data-toggle=\"tooltip\"]").tooltip(),a(".favorite").on("click",function(){a(this).hide(),e(a(this).data("id"),a(this),"add"),a(this).next().show()}),a(".remove-favorite").on("click",function(){a(this).hide(),e(a(this).data("id"),a(this),"delete"),a(this).prev().show()})})}if(0<a(".fav-section-detail").length){let b=a("#similar-properties-section");a(".display-data").hide(),b.html(""),a(".ajax-loader").show(),a("#ajax-loader-properties").show(),a.get("/get-similar-properties",{property:a("#email-contact-form").find("input[name=property]").val()},function(c){let d=a(".slick-carousel");a(".display-data").show(),a("#ajax-loader-properties").hide(),d.slick("unslick"),b.html(""),b.html(c.view),d.slick({arrows:!1,slidesToShow:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]})})}if(0<a(".detail-page-fav").length){let b=a(".detail-page-fav"),c=b.attr("data-id");b.html("<i class=\"fa fa-spinner fa-spin\"></i>"),g(f,c)}}else b.error&&(a("div.help-block small").html(b.error.password),a(".error-tag").show())},error:function(){b.preventDefault()},complete:function(){}}))}),a("#btnAccept").click(()=>{h("allowCookies","1",7),a(".toast").hide()}),k()})})(jQuery);
